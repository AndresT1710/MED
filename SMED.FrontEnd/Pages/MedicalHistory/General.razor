@page "/medical-history/general"
@using SMED.FrontEnd.Components

<TabContainer OnSave="GuardarDatos">
    <h4>Historia Clínica - General</h4>
    <PatientSelector />

    <div class="editable-table-wrapper">
        <EditableTable Title="Antecedentes Personales"
                       ColumnHeaders="@headersPersonales"
                       Rows="@personales"
                       ColumnOptions="@optionsPersonales" />

        <EditableTable Title="Antecedentes Familiares"
                       ColumnHeaders="@headersFamiliares"
                       Rows="@familiares"
                       ColumnOptions="@optionsFamiliares" />

        <EditableTable Title="Antecedentes de Cirugías"
                       ColumnHeaders="@headersCirugias"
                       Rows="@cirugias"
                       ColumnOptions="@optionsCirugias" />

        <EditableTable Title="Antecedentes de Alergias"
                       ColumnHeaders="@headersAlergias"
                       Rows="@alergias"
                       ColumnOptions="@optionsAlergias" />

        <EditableTable Title="Antecedentes de Hábitos"
                       ColumnHeaders="@headersHabitos"
                       Rows="@habitos"
                       ColumnOptions="@optionsHabitos" />
    </div>
</TabContainer>

@code {
    // Headers
    List<string> headersPersonales = new() { "Tipo", "Descripción", "Fecha" };
    List<string> headersFamiliares = new() { "Parentesco", "Enfermedad", "Observaciones" };
    List<string> headersCirugias = new() { "Procedimiento", "Año", "Complicaciones" };
    List<string> headersAlergias = new() { "Alergeno", "Reacción", "Severidad" };
    List<string> headersHabitos = new() { "Hábito", "Frecuencia", "Años" };

    // Datos
    List<List<string>> personales = new();
    List<List<string>> familiares = new();
    List<List<string>> cirugias = new();
    List<List<string>> alergias = new();
    List<List<string>> habitos = new();

    // Opciones para los selects
    Dictionary<string, List<string>> optionsPersonales = new()
        {
            ["Tipo"] = new() { "Enfermedad", "Accidente", "Hospitalización", "Otro" },
            ["Descripción"] = new() { "Diabetes", "Hipertensión", "Asma", "Cardiopatía" },
            ["Fecha"] = new() { "Reciente", "Hace 1 año", "Hace 5 años", "Hace 10 años" }
        };

    Dictionary<string, List<string>> optionsFamiliares = new()
        {
            ["Parentesco"] = new() { "Padre", "Madre", "Hermano", "Abuelo" },
            ["Enfermedad"] = new() { "Cáncer", "Diabetes", "Hipertensión", "Alzheimer" },
            ["Observaciones"] = new() { "Fallecido", "Vivo en tratamiento", "Sin complicaciones" }
        };

    // Similar para las otras tablas...
    Dictionary<string, List<string>> optionsCirugias = new()
        {
            ["Procedimiento"] = new() { "Apéndice", "Vesícula", "Rodilla", "Cesárea" },
            ["Año"] = new() { "2023", "2020", "2015", "2010" },
            ["Complicaciones"] = new() { "Ninguna", "Infección", "Hemorragia", "Otra" }
        };

    Dictionary<string, List<string>> optionsAlergias = new()
        {
            ["Alergeno"] = new() { "Penicilina", "Aspirina", "Mariscos", "Polvo" },
            ["Reacción"] = new() { "Urticaria", "Anafilaxia", "Erupción", "Edema" },
            ["Severidad"] = new() { "Leve", "Moderada", "Severa", "Crítica" }
        };

    Dictionary<string, List<string>> optionsHabitos = new()
        {
            ["Hábito"] = new() { "Tabaco", "Alcohol", "Cafeína", "Ejercicio" },
            ["Frecuencia"] = new() { "Diario", "Semanal", "Ocasional", "Ex-fumador" },
            ["Años"] = new() { "<1 año", "1-5 años", "5-10 años", ">10 años" }
        };

    void GuardarDatos()
    {
        // Lógica para guardar los datos
    }
}